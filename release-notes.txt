==============================================================================
Databricks JDBC Driver Release Notes 
==============================================================================

The release notes summarize enhancements, new features, known issues, workflow changes, and version history for the Databricks JDBC Driver (OSS).

Version History ==============================================================

3.0.1 ========================================================================

Released 2025-10-13

Enhancements & New Features

 * Added `enableMultipleCatalogSupport` connection parameter to control catalog metadata behavior.


Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 3.0.1.

 * Fixed complex data type conversion issues by improving StringConverter to handle Databricks complex objects (arrays/maps/structs), JDBC arrays/structs, and generic collections.
 * Fixed ComplexDataTypeParser to correctly parse ISO timestamps with T separators and timezone offsets, preventing Arrow ingestion failures.

1.0.11 -----------------------------------------------------------------------

Released 2025-10-06

Enhancements & New Features

 * Enabled direct results by default in SEA mode to improve latency for short and small queries.
 * Telemetry data is now captured more efficiently and consistently due to enhancements in the log and connection close flush logic.
 * Updated Databricks SDK version to v0.65.0 to fix OAuthClient to properly encode complex query parameters.
 * Added IgnoreTransactions connection parameter to silently ignore transaction method calls.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.11.

 * Fixed state leaking issue in thrift client.
 * Fixed timestamp values returning only milliseconds instead of the full nanosecond precision.
 * Fixed Statement.getUpdateCount() for DML queries.

1.0.10 -----------------------------------------------------------------------

Released 2025-09-18

Enhancements & New Features

 * Added Query Tags support to attach key-value tags to SQL queries.
 * Added support for SQL Scripting.
 * Added a client property `enableVolumeOperations` to enable GET/PUT/REMOVE volume operations on a stream.
 * Support for fetching schemas across all catalogs in `DatabaseMetaData#getSchemas`.
 * Added `EnableSQLValidationForIsValid` connection property to control whether `isValid()` executes a server-side query.
 * Implemented multi-row INSERT batching optimization for prepared statements.
 * Implemented lazy/incremental fetching for columnar results in Thrift mode without Arrow support to reduce memory usage.
 * Added new artifact `databricks-jdbc-thin` for thin jar with runtime dependency metadata.
 * Introduced a memory-efficient columnar data access mechanism for JDBC result processing.
 * Added support for using a custom Discovery URL in U2M flows on AWS and GCP.
 * Databricks SDK dependency upgraded to latest version 0.64.0.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.10.

 * Integrated Azure U2M flow into driver for improved stability.
 * Fixed `ResultSet.getString` for Boolean columns in Metadata result set.
 * Fixed volume operations not completing unless the ResultSet is fully iterated.
 * Fixed `connection.getMetadata().getColumns()` to return the correct SQL data type code for complex type columns.
 * Fixed a bug in metadata parsing for nested decimal fields within struct types.
 * Fixed case sensitive table search in `connection.getMetadata().getTables()`.
 * Fixed `connection.getMetadata().getColumns()` to return the correct scale.

1.0.9 ------------------------------------------------------------------------

Released 2025-08-19

Enhancements & New Features

 * Added support for providing custom HTTP options: `HttpMaxConnectionsPerRoute` and `HttpConnectionRequestTimeout`.
 * Added V2 of chunk download using async http client.
 * Telemetry is enabled by default, subject to server-side rollout.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.9.

 * Fixed Statement.getUpdateCount to return -1 for non-DML queries.
 * Fixed Statement.setMaxRows(0) to be interpreted as no limit.
 * Fixed retry behaviour to not throw an exception when there is no retry-after header for 503 and 429 status codes.
 * Fixed encoded UserAgent parsing in BI tools.
 * Fixed setting empty schema as the default schema in the spark session.

1.0.8 ------------------------------------------------------------------------

Released 2025-07-25

Enhancements & New Features

 * Added DCO (Developer Certificate of Origin) check workflow for pull requests.
 * Added support for SSL client certificate authentication via parameter: SSLTrustStoreProvider.
 * Provided an option to push telemetry logs (using the flag `ForceEnableTelemetry=1`).
 * Added putFiles methods in DBFSVolumeClient for async multi-file upload.
 * Added validation on UID param to ensure it is either not set or set to 'token'.
 * Added CloudFetch download speed logging at INFO level.
 * Added vendor error codes to SQLExceptions raised for incorrect UID, host or token.
 * Column name support for JDBC ResultSet operations is now case-insensitive.
 * Updated arrow to 17.0.0 to resolve CVE-2024-52338.
 * Updated commons-lang3 to 3.18.0 to resolve CVE-2025-48924.
 * Enhanced SSL certificate path validation error messages to provide actionable troubleshooting steps.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.8.

 * Fixed Bouncy Castle registration conflicts by using local provider instance.
 * Fixed Azure U2M authentication issue.
 * Fixed unchecked exception thrown in delete session.
 * Fixed ParameterMetaData.getParameterCount() to align with JDBC standards.

1.0.7 ------------------------------------------------------------------------

Released 2025-05-26

Enhancements & New Features

 * Added support for DoD (.mil) domains.
 * Enabled fetching of metadata for SELECT queries using PreparedStatement prior to setting parameters or executing the query.
 * Added support for SSL client certificate authentication via keystore configuration parameters.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.7.

 * Updated JDBC URL regex to accept valid connection strings that were incorrectly rejected.
 * Updated decimal conversion logic to fix numeric values missing decimal precision.

1.0.6 ------------------------------------------------------------------------

Released 2025-05-29

Enhancements & New Features

 * Support for fetching tables and views across all catalogs using SHOW TABLES FROM/IN ALL CATALOGS.
 * Support for Token Exchange in OAuth flows.
 * Support for polling of statementStatus and sqlState for async SQL execution.
 * Support for REAL, NUMERIC, CHAR, and BIGINT JDBC types in `PreparedStatement.setObject`.
 * Support for INTERVAL data type.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.6.

 * Added explicit null check for Arrow value vector when the value is not set and Arrow null checking is disabled.

1.0.5 ------------------------------------------------------------------------

Released 2025-04-28

Enhancements & New Features

 * Support for token cache in OAuth U2M Flow using `EnableTokenCache` and `TokenCachePassPhrase`.
 * Support for additional SSL functionality including `UseSystemTruststore` and `AllowSelfSignedCerts`.
 * Added support for `getImportedKeys` and `getCrossReferences` in SQL Exec API mode.
 * Modified E2E tests to validate driver behavior under multi-threaded access patterns.
 * Improved error handling through telemetry by throwing custom exceptions.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.5.

 * Fixed bug where batch prepared statements could lead to backward-incompatible error scenarios.
 * Corrected setting of decimal types in prepared statement executions.
 * Resolved NullPointerException (NPE) that occurred during ResultSet and Connection operations in multithreaded environment.

1.0.4 ------------------------------------------------------------------------

Released 2025-04-14

Enhancements & New Features

 * Support for connection parameter SocketTimeout.
 * Handle server returned Thrift version as part of open session response gracefully.
 * Added OWASP security check in the repository.
 * Updated SDK to the latest version (0.44.0).
 * Add descriptive messages in thrift error scenario.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.4.

 * BigDecimal is now set correctly to NULL if null value is provided.
 * Fixed issue with JDBC URL not being parsed correctly when compute path is provided via properties.
 * Addressed CVE vulnerabilities (CVE-2024-47535, CVE-2025-25193, CVE-2023-33953).
 * Fix bug in preparedStatement decimal parameter in thrift flow.

1.0.3 ------------------------------------------------------------------------

Released 2025-04-08

Enhancements & New Features

 * Introduces a centralized timeout check and automatic cancellation for statements.
 * Allows specifying a default size for STRING columns via `defaultStringColumnLength`.
 * Implements a custom retry strategy to handle long-running tasks and connection attempts.
 * Added support for Azure Managed Identity based authentication.
 * Adds existence checks for volumes, objects, and prefixes.
 * Allows adjusting the number of rows retrieved per fetch via `RowsFetchedPerBlock` parameter.
 * Allows overriding the default OAuth redirect port using `OAuth2RedirectUrlPort`.
 * Support for custom headers in the JDBC URL via `http.header.<key>=<value>`.
 * Removes the hard-coded default poll interval configuration in favor of a user-defined parameter.
 * Adjusts the handling of NULL and non-NULL boolean values.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.3.

 * Ensures the driver respects the configured limit on the number of rows returned.
 * Improves retry behaviour to cover all operations, relying solely on the total retry time specified.
 * Returns an exception instead of -1 when a column is not found.

1.0.2 ------------------------------------------------------------------------

Released 2025-03-19

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.2.

 * Fixed columnType conversion for Variant and Timestamp_NTZ types.
 * Fix minor issue for string dealing with whitespaces.

1.0.1 ------------------------------------------------------------------------

Released 2025-03-11

Workflow Changes
The following changes may disrupt established workflows for the connector.

 * Changes to JDBC URL parameters to ensure compatibility with the latest Databricks driver:
   1. Removed catalog in favour of ConnCatalog
   2. Removed schema in favour of ConnSchema
   3. Renamed OAuthDiscoveryURL to OIDCDiscoveryEndpoint
   4. Renamed OAuth2TokenEndpoint to OAuth2ConnAuthTokenEndpoint
   5. Renamed OAuth2AuthorizationEndPoint to OAuth2ConnAuthAuthorizeEndpoint
   6. Renamed OAuthDiscoveryMode to EnableOIDCDiscovery
   7. Renamed OAuthRefreshToken to Auth_RefreshToken

Enhancements & New Features

 * Support for complex data types, including MAP, ARRAY, and STRUCT.
 * Support for TIMESTAMP_NTZ and VARIANT data types.
 * Extended support for prepared statement when using thrift DBSQL/all-purpose clusters.
 * Improved backward compatibility with the latest Databricks driver.
 * Improved driver performance for large queries by optimizing chunk handling.
 * Configurable HTTP connection pool size for better resource management.
 * Support for Azure Active Directory (AAD) Service Principal in M2M OAuth.
 * Implemented java.sql.Driver#getPropertyInfo to fetch driver properties.
 * Set Thrift mode as the default for the driver.
 * Improved driver telemetry (opt-in feature) for better monitoring and debugging.
 * Enhanced test infrastructure to improve accuracy and reliability.
 * Added SQL state support in SEA mode.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 1.0.1.

 * Ensured TIMESTAMP columns are returned in local time.
 * Resolved inconsistencies in schema and catalog retrieval from the Connection class.
 * Fixed minor issues with metadata fetching in Thrift mode.
 * Addressed incorrect handling of access tokens provided via client info.
 * Corrected the driver version reported by DatabaseMetaData.
 * Fixed case-sensitive behaviour while fetching client info.

0.9.9 ------------------------------------------------------------------------

Released 2025-01-03

Enhancements & New Features

 * Telemetry support in OSS JDBC.
 * Support for fetching connection ID and closing connections by connection ID.
 * Stream support implementation in the UC Volume DBFS Client.
 * Hybrid result support added to the driver (for both metadata and executed queries).
 * Support for complex data types.
 * Apache Async HTTP Client 5.3 added for parallel query result downloads.
 * Enhanced end-to-end testing for M2M and DBFS UCVolume operations.
 * Removed the version check SQL call when connection is established.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.9.

 * Fixed statement ID extraction from Thrift GUID.
 * Made volume operations flag backward-compatible with the existing Databricks driver.
 * Improved backward compatibility of ResultSetMetadata with the legacy driver.
 * Fix schema in connection string.

0.9.8 ------------------------------------------------------------------------

Released 2024-12-13

Enhancements & New Features

 * Run queries in async mode in the thrift client.
 * Added GET and DELETE operations for the DBFS client, enabling full UC Volume operations.
 * Do not send repeated DBSQL version queries.
 * Skip SEA compatibility check if null or empty DBSQL version is returned by the workspace.
 * Skips SEA check when DBSQL version string is blank space.
 * Updated SDK version to resolve CVEs.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.8.

 * Eliminated the statement execution thread pool.
 * Fixed UC volume GET operation.
 * Fixed async execution in SEA mode.
 * Fixed and updated the SDK version to resolve CVEs.

0.9.7 ------------------------------------------------------------------------

Released 2024-11-20

Enhancements & New Features

 * Added GCP OAuth support: Use Google ID with a custom JWT or Google Credentials.
 * SQL state added in thrift flow.
 * Add readable statement-Id for thrift.
 * Added Client to perform UC Volume operations without needing DB compute.
 * Add compression for SEA flow.
 * Updated support for large queries in thrift flow.
 * Throw exceptions in case unsupported old DBSQL versions are used.
 * Deploy reduced POM during release.
 * Improve executor service management.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.7.

 * Certificate revocation properties only apply when provided.
 * Create a new HTTP client for each connection.
 * Accept customer userAgent without errors.

0.9.6 ------------------------------------------------------------------------

Released 2024-10-24

Enhancements & New Features

 * Added compression in the Thrift protocol flow.
 * Added support for asynchronous query execution.
 * Implemented `executeBatch` for batch operations.
 * Added a method to extract disposition from result set metadata.
 * Optimised memory allocation for type converters.
 * Enhanced logging for better traceability.
 * Improved performance in the Thrift protocol flow.
 * Upgraded `commons-io` to address security vulnerability.
 * Ensured thread safety in `DatabricksPooledConnection`.
 * Set UBER jar as the default jar for distribution.
 * Refined result chunk management for better efficiency.
 * Enhanced integration tests for broader coverage.
 * Increased unit test coverage threshold to 85%.
 * Improved interaction with Thrift-server client.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.6.

 * Fixed compatibility issue with other drivers in the driver manager.

0.9.5 ------------------------------------------------------------------------

Released 2024-09-25

Enhancements & New Features

 * Support proxy ignore list.
 * OSS Readiness improvements.
 * Improve Logging.
 * Add SSL Truststore URL params to allow configuring custom SSL truststore.
 * Accept Pass-through access token as part of JDBC connector parameter.
 * `getTables` Thrift call to align with JDBC standards.
 * Improved metadata functions.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.5.

 * Fixed memory leaks and made chunk download thread-safe.
 * Fixed issues with prepared statements in Thrift and set default timestamps.
 * Fixed issues with empty table types, null pointer in `IS_GENERATEDCOLUMN`, and ordinal position.
 * Increased retry attempts for chunk downloads to enhance resilience.
 * Fixed exceptions being thrown for statement timeouts and cancel futures.
 * Improved UC Volume code.
 * Remove cyclic dependencies in package.

0.9.4 ------------------------------------------------------------------------

Released 2024-09-13

Enhancements & New Features

 * Fallback mechanism for smoother token refresh flow.
 * Retry logic to improve chunk download reliability.
 * Improved logging for timeouts and statement execution for better issue tracking.
 * Timestamp logging in UTC to avoid skew caused by local timezones.
 * Passthrough token handling with backward compatibility for the existing driver.
 * Continued improvements towards OSS readiness.
 * `getTables` Thrift call to align with JDBC standards.
 * Improved accuracy of column metadata.
 * Passthrough token handling for backward compatibility.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.4.

 * Memory leaks and made chunk download thread-safe.
 * Issues with prepared statements in Thrift and set default timestamps.
 * Increased retry attempts for chunk downloads to enhance resilience.
 * Exceptions are now thrown for statement timeouts and cancel futures.

0.9.3 ------------------------------------------------------------------------

Released 2024-09-01

Enhancements & New Features

 * OSS readiness changes.
 * M2M JWT support.
 * Credential provider OAuthRefresh.
 * Commands to run benchmarking tests.
 * Compiling logic for benchmarking workflows.
 * Fixed metadata and TableType issues.

0.9.2 ------------------------------------------------------------------------

Released 2024-08-24

Enhancements & New Features

 * Fixed precision and scale for certain dataTypes.

Resolved Issues
The following issues have been resolved in Databricks JDBC Driver 0.9.2.

 * Minor bug for UC Volume in Thrift mode.
 * SLF4j support for default SDK mode.
 * Deprecated username handling.
 * Catalog and schema not set by default.

0.9.1 ------------------------------------------------------------------------

Released 2024-08-08

 * Support for Input Stream in UC Volume Operations.
 * Metadata fixes.
 * Redacted passwords from logging.

0.9.0 ------------------------------------------------------------------------

Released 2024-07-24

Enhancements & New Features

 * Release OSS JDBC driver for Public Preview.

0.9.0-beta -------------------------------------------------------------------

Released 2024-07-22

Enhancements & New Features

 * Initial beta release of Databricks JDBC OSS Driver for Public Preview.

0.7.0 ------------------------------------------------------------------------

Released 2024-07-09

Enhancements & New Features

 * Stable release before Public Preview.

0.1.0 ------------------------------------------------------------------------

Released 2024-06-02

Enhancements & New Features

 * All-purpose cluster support and logging support.

0.0.1 ------------------------------------------------------------------------

Released 2024-02-29

Enhancements & New Features

 * First stable release with support for SQL warehouses.

==============================================================================